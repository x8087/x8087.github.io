<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="笔记,vim," />





  <link rel="alternate" href="/atom.xml" title="假如上帝不是程序员" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.0" />






<meta name="description" content="vim7.4脚本相关帮助笔记">
<meta name="keywords" content="笔记,vim">
<meta property="og:type" content="article">
<meta property="og:title" content="Vim脚本语法">
<meta property="og:url" content="http://x8087.github.io/2016/12/15/Vim脚本语法/index.html">
<meta property="og:site_name" content="假如上帝不是程序员">
<meta property="og:description" content="vim7.4脚本相关帮助笔记">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2016-12-29T15:31:32.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Vim脚本语法">
<meta name="twitter:description" content="vim7.4脚本相关帮助笔记">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '12948511',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://x8087.github.io/2016/12/15/Vim脚本语法/"/>





  <title> Vim脚本语法 | 假如上帝不是程序员 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?9d2df6bea6a5f9af49a265803692cb1b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=59604490";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">假如上帝不是程序员</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">--存在就是最大的bug</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://x8087.github.io/2016/12/15/Vim脚本语法/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="x8087">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="假如上帝不是程序员">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="假如上帝不是程序员" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Vim脚本语法
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-15T00:13:14+08:00">
                2016-12-15
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              <span class="post-meta-item-text">更新于</span>
              <time title="更新于" itemprop="dateModified" datetime="2016-12-29T23:31:32+08:00">
                2016-12-29
              </time>
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/15/Vim脚本语法/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/15/Vim脚本语法/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/12/15/Vim脚本语法/" class="leancloud_visitors" data-flag-title="Vim脚本语法">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>vim7.4脚本相关帮助笔记<br><a id="more"></a></p>
<h1 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h1><h2 id="条件-if"><a href="#条件-if" class="headerlink" title="条件(if)"></a>条件(if)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&quot;if语句</div><div class="line">:if &#123;condition&#125;</div><div class="line">  &#123;statements&#125;</div><div class="line">:endif</div><div class="line"></div><div class="line">&quot;if-else语句</div><div class="line">if &#123;condition&#125;</div><div class="line">  &#123;statements&#125;</div><div class="line">:else</div><div class="line">  &#123;statements&#125;</div><div class="line">:endif</div><div class="line"></div><div class="line">&quot;if-elseif-else语句</div><div class="line">:if &#123;condition&#125;</div><div class="line">  &#123;statements&#125;</div><div class="line">:elseif &#123;condition&#125;</div><div class="line">  &#123;statements&#125;</div><div class="line">:else</div><div class="line">  &#123;statements&#125;</div><div class="line">:endif</div></pre></td></tr></table></figure>
<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">:while &#123;条件&#125;</div><div class="line">:  &#123;语句&#125;</div><div class="line">:endwhile</div></pre></td></tr></table></figure>
<h3 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a>for in</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">:for &#123;变量&#125; in &#123;列表&#125;</div><div class="line">:  &#123;语句&#125;</div><div class="line">:endfo[r]</div><div class="line"></div><div class="line">:for [&#123;变量1&#125;, &#123;变量2&#125;, ...] in &#123;二维列表&#125;</div><div class="line">:  &#123;语句&#125;</div><div class="line">:endfo[r]</div></pre></td></tr></table></figure>
<h3 id="更多循环"><a href="#更多循环" class="headerlink" title="更多循环"></a>更多循环</h3><p><code>:continue</code> 跳转回到循环开始继续循环<br><code>:break</code> 跳转到<code>:endwihile</code>，不继续循环</p>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><p>变量名包含ASCII字符，数字和下划线，不能以数字开头。<br><code>:let</code>查看当前定义变量列表。<br><code>:let {变量} = {表达式}</code>    定义变量<br><code>:unlet {变量}</code>             删除变量<br><code>:unlet! {变量}</code>            删除变量，不管变量是否存在，不需要报错信息。<br><code>exist(&quot;{变量}&quot;)</code>           检测变量是否存在，参数是检测的变量名。<br>true为非0，false为0<br>vim在查找数字时自动转换字符串为数字，当字符串不以0开头时，结果为0。<br><code>type()</code>获取变量类型<br>特殊变量：</p>
<ul>
<li>‘viminfo’选项包含’!’标志时，以大写字符开头且不包含小写字符的全局变量保存在viminfo-file</li>
<li>‘sessionoptions’选项包含”global”时，以大写字符开头且至少包含一个小写字符的全局变量保存在session-file</li>
</ul>
<h2 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h2><ul>
<li>Vim支持的基本类型有数字和字符串。</li>
<li>变量类型是动态的，每次使用<code>:let</code>给变量赋值时设置类型。</li>
</ul>
<h3 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h3><ul>
<li><em>十进制</em> 不以”0”开头数字。</li>
<li><em>十六进制</em> 以”0x”或者”0X”开头。</li>
<li><em>八进制</em> 以”0”开头。</li>
<li>负数在前面加负号 </li>
</ul>
<p>注:<strong>表达式忽略空格</strong></p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><h4 id="字符串常量"><a href="#字符串常量" class="headerlink" title="字符串常量"></a>字符串常量</h4><h5 id="使用双引号"><a href="#使用双引号" class="headerlink" title="使用双引号"></a>使用双引号</h5><ul>
<li>字符串内部包含双引号时使用反斜杠转义<code>\&quot;</code></li>
<li>特殊字符使用反斜杠转义</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">A string constant accepts these special characters:</div><div class="line">\...	three-digit octal number (e.g., &quot;\316&quot;)</div><div class="line">\..	two-digit octal number (must be followed by non-digit)</div><div class="line">\.	one-digit octal number (must be followed by non-digit)</div><div class="line">\x..	byte specified with two hex numbers (e.g., &quot;\x1f&quot;)</div><div class="line">\x.	byte specified with one hex number (must be followed by non-hex char)</div><div class="line">\X..	same as \x..</div><div class="line">\X.	same as \x.</div><div class="line">\u....	character specified with up to 4 hex numbers, stored according to the</div><div class="line">	current value of &apos;encoding&apos; (e.g., &quot;\u02a4&quot;)</div><div class="line">\U....	same as \u but allows up to 8 hex numbers.</div><div class="line">\b	backspace &lt;BS&gt;</div><div class="line">\e	escape &lt;Esc&gt;</div><div class="line">\f	formfeed &lt;FF&gt;</div><div class="line">\n	newline &lt;NL&gt;</div><div class="line">\r	return &lt;CR&gt;</div><div class="line">\t	tab &lt;Tab&gt;</div><div class="line">\\	backslash</div><div class="line">\&quot;	double quote</div><div class="line">\&lt;xxx&gt;	Special key named &quot;xxx&quot;.  e.g. &quot;\&lt;C-W&gt;&quot; for CTRL-W.  This is for use</div><div class="line">	in mappings, the 0x80 byte is escaped.</div><div class="line">	To use the double quote character it must be escaped: &quot;&lt;M-\&quot;&gt;&quot;.</div><div class="line">	Don&apos;t use &lt;Char-xxxx&gt; to get a utf-8 character, use \uxxxx as</div><div class="line">	mentioned above.</div></pre></td></tr></table></figure>
<h5 id="使用单引号"><a href="#使用单引号" class="headerlink" title="使用单引号"></a>使用单引号</h5><ul>
<li>所有字符除单引号外都不需要转义，使用两个单引号表示自己<code>&#39;&#39;</code></li>
</ul>
<h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><ul>
<li>有序序列</li>
<li>序列项可以为任何类型，甚至混合使用</li>
<li><em>创建列表</em> <code>:let alist = [{item}, {item}, {item}....]</code></li>
<li><em>添加项</em> <code>add({list}, {item})</code></li>
<li><em>连接或扩展列表</em> <code>{list}+{list2}</code> 或者 <code>call extend({list}, {list2})</code></li>
<li><em>拷贝</em> <code>copy()</code> 或者 <code>[:]</code></li>
<li><em>深拷贝</em> <code>deepcopy()</code></li>
<li><em>判断是否同一个list</em> <code>is</code>和<code>isnot</code></li>
<li><em>判断两个列表是否包含相同值</em> <code>==</code>，当长度相同且所有项使用<code>==</code>对比后相等时为真。<br>注意：字符串和数字比较时不会自动类型转换，视为不相等项。</li>
<li>列表比较比数字与字符串比较要严格</li>
<li><em>列表解包</em> <code>:let [var1, var2] = mylist</code>（当列表长度与变量数不对应时会报错），使用<code>:let [var1, var2; rest] = mylist</code>可以将额外项放到rest，避免报错。</li>
<li><em>列表修改</em> <code>:let list[4] = &quot;four&quot;</code>,<code>:let listlist[0][3] = item</code></li>
<li><em>列表部分修改</em> `:let list[3:5] = [3, 4, 5]</li>
<li>从列表添加和移除项：<br>examples: &gt;<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">:call insert(list, &apos;a&apos;)		&quot; prepend item &apos;a&apos;</div><div class="line">:call insert(list, &apos;a&apos;, 3)	&quot; insert item &apos;a&apos; before list[3]</div><div class="line">:call add(list, &quot;new&quot;)		&quot; append String item</div><div class="line">:call add(list, [1, 2])		&quot; append a List as one new item</div><div class="line">:call extend(list, [1, 2])	&quot; extend the list with two more items</div><div class="line">:let i = remove(list, 3)	&quot; remove item 3</div><div class="line">:unlet list[3]			&quot; idem</div><div class="line">:let l = remove(list, 3, -1)	&quot; remove items 3 to last item</div><div class="line">:unlet list[3 : ]		&quot; idem</div><div class="line">:call filter(list, &apos;v:val !~ &quot;x&quot;&apos;)  &quot; remove items with an &apos;x&apos;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>Changing the order of items in a list: &gt;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">:call sort(list)		&quot; sort a list alphabetically</div><div class="line">:call reverse(list)		&quot; reverse the order of items</div><div class="line">:call uniq(sort(list))		&quot; sort and remove duplicates</div></pre></td></tr></table></figure></p>
<ul>
<li>列表方法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">:let r = call(funcname, list)	&quot; call a function with an argument list</div><div class="line">:if empty(list)			&quot; check if list is empty</div><div class="line">:let l = len(list)		&quot; number of items in list</div><div class="line">:let big = max(list)		&quot; maximum value in list</div><div class="line">:let small = min(list)		&quot; minimum value in list</div><div class="line">:let xs = count(list, &apos;x&apos;)	&quot; count nr of times &apos;x&apos; appears in list</div><div class="line">:let i = index(list, &apos;x&apos;)	&quot; index of first &apos;x&apos; in list</div><div class="line">:let lines = getline(1, 10)	&quot; get ten text lines from buffer</div><div class="line">:call append(&apos;$&apos;, lines)	&quot; append text lines in buffer</div><div class="line">:let list = split(&quot;a b c&quot;)	&quot; create list from items in a string</div><div class="line">:let string = join(list, &apos;, &apos;)	&quot; create string from list items</div><div class="line">:let s = string(list)		&quot; String representation of list</div><div class="line">:call map(list, &apos;&quot;&gt;&gt; &quot; . v:val&apos;)  &quot; prepend &quot;&gt;&gt; &quot; to each item</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><ul>
<li>无序序列，键值对</li>
<li><em>创建列表</em> <code>:let {varname} = {&lt;key&gt; : &lt;value&gt;, ...}</code></li>
<li><em>访问字典项</em> <code>:echo {varname}[{key}]</code>或者<code>:echo {varname}.{key}</code></li>
<li><em>字典方法</em> <code>:function {dictname}.{funcname}({param}) dict</code>方法内部可以通过<code>self</code>访问字典本身</li>
<li><code>keys()</code> <code>values()</code> <code>items()</code></li>
<li>字典相关方法<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">:if has_key(dict, &apos;foo&apos;)	&quot; TRUE if dict has entry with key &quot;foo&quot;</div><div class="line">:if empty(dict)			&quot; TRUE if dict is empty</div><div class="line">:let l = len(dict)		&quot; number of items in dict</div><div class="line">:let big = max(dict)		&quot; maximum value in dict</div><div class="line">:let small = min(dict)		&quot; minimum value in dict</div><div class="line">:let xs = count(dict, &apos;x&apos;)	&quot; count nr of times &apos;x&apos; appears in dict</div><div class="line">:let s = string(dict)		&quot; String representation of dict</div><div class="line">:call map(dict, &apos;&quot;&gt;&gt; &quot; . v:val&apos;)  &quot; prepend &quot;&gt;&gt; &quot; to each item</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="变量范围"><a href="#变量范围" class="headerlink" title="变量范围"></a>变量范围</h2><p><code>name</code>     在函数内为函数本地变量，否则为全局变量<br><code>s:name</code>   脚本变量<br><code>b:name</code>   本地缓存变量。其中b:changedtick为预定义变量，表示当前缓存改变总数。<br><code>w:name</code>   本地窗口变量<br><code>t:name</code>   本地标签变量<br><code>g:name</code>   全局变量<br><code>l:name</code>   函数本地变量<br><code>a:name</code>   函数参数（只在函数内有效）<br><code>v:name</code>   vim预定义变量</p>
<p>变量范围名可以当作字典使用。例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for k in keys(s:)</div><div class="line">  unlet s:[k]</div><div class="line">endfor</div></pre></td></tr></table></figure></p>
<h2 id="花括号名称"><a href="#花括号名称" class="headerlink" title="花括号名称"></a>花括号名称</h2><p>在大多数可以使用变量的地方，可以使用”花括号各称”变量。这是具有一个或者多个表达式的常规变量名包裹在一对花括号内，如：<code>my_{varname}_variable</code><br>当vim遇到这种情况时，会计算括号内的表达式，代替表达式位置，并将整个重新解释为一个变量名。<br>可以使用选项值，如：<code>my_{&amp;background}_message</code><br>可以使用多对花括号。<br>可以嵌套使用。<br>注：最终解悉后的变量名必须为有效的变量名。</p>
<h1 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h1><ul>
<li><p>表达式的基本项有<strong>数字</strong>，<strong>字符串</strong>，<strong>变量</strong>，<strong>$Name</strong>(环境变量), <strong>&amp;name</strong>(选项), <strong>@r</strong>(寄存器)</p>
<h2 id="表达式语法"><a href="#表达式语法" class="headerlink" title="表达式语法"></a>表达式语法</h2></li>
<li><p>“..” 表示此级别的操作可连接</p>
</li>
<li>一个级别内的所有表达式从左到右解析</li>
<li>对于比较表达式，如果条件满足结果为1，否则为0</li>
<li>逻辑运算符同时用于数字和字符串。 </li>
<li>比较两个字符串时，使用数字差异。 这是比较字节值，可能不适合某些语言。</li>
<li>当将字符串与数字进行比较时，字符串首先转换为数字。 这有点棘手，因为当一个字符串不像一个数字时，使用数字零。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">expr2 ? expr1 : expr1	if-then-else</div><div class="line"></div><div class="line">expr3 || expr3 ..	logical OR</div><div class="line">expr4 &amp;&amp; expr4 ..	logical AND</div><div class="line"></div><div class="line">expr5 == expr5		equal</div><div class="line">expr5 != expr5		not equal</div><div class="line">expr5 &gt;	 expr5		greater than</div><div class="line">expr5 &gt;= expr5		greater than or equal</div><div class="line">expr5 &lt;	 expr5		smaller than</div><div class="line">expr5 &lt;= expr5		smaller than or equal</div><div class="line">expr5 =~ expr5		regexp matches</div><div class="line">expr5 !~ expr5		regexp doesn&apos;t match</div><div class="line">expr5 ==? expr5		equal, ignoring case</div><div class="line">expr5 ==# expr5		equal, match case</div><div class="line">etc.			As above, append ? for ignoring case, # for matching case</div><div class="line"></div><div class="line">expr5 is expr5		same List instance</div><div class="line">expr5 isnot expr5	different List instance</div><div class="line"></div><div class="line">expr6 +	 expr6 ..	number addition or list concatenation</div><div class="line">expr6 -	 expr6 ..	number subtraction</div><div class="line">expr6 .	 expr6 ..	string concatenation</div><div class="line"> and(), or(), xor() 位操作</div><div class="line"></div><div class="line">expr7 *	 expr7 ..	number multiplication</div><div class="line">expr7 /	 expr7 ..	number division</div><div class="line">expr7 %	 expr7 ..	number modulo</div><div class="line"></div><div class="line">! expr7			logical NOT</div><div class="line">- expr7			unary minus</div><div class="line">+ expr7			unary plus</div><div class="line"></div><div class="line">expr8[expr1]		byte of a String or item of a |List|</div><div class="line">expr8[expr1 : expr1]	substring of a String or sublist of a |List|</div><div class="line">expr8.name		entry in a |Dictionary|</div><div class="line">expr8(expr1, ...)	function call with |Funcref| variable</div><div class="line"></div><div class="line">number		number constant</div><div class="line">&quot;string&quot;		string constant, backslash is special</div><div class="line">&apos;string&apos;		string constant, &apos; is doubled</div><div class="line">[expr1, ...]		|List|</div><div class="line">&#123;expr1: expr1, ...&#125;	|Dictionary|</div><div class="line">&amp;option			option value</div><div class="line">(expr1)			nested expression</div><div class="line">variable		internal variable</div><div class="line">va&#123;ria&#125;ble		internal variable with curly braces</div><div class="line">$VAR			environment variable</div><div class="line">@r			contents of register &apos;r&apos;</div><div class="line">function(expr1, ...)	function call</div><div class="line">func&#123;ti&#125;on(expr1, ...)	function call with curly braces</div><div class="line">&#123;args -&gt; expr1&#125;		lambda expression</div></pre></td></tr></table></figure>
<h1 id="Execute命令"><a href="#Execute命令" class="headerlink" title="Execute命令"></a>Execute命令</h1><ul>
<li><code>:execute</code>命令允许执行表达式结果，这是构建并执行命令的一种非常强大的方法。</li>
<li><code>:execute</code>命令只能执行冒号命令。</li>
<li><code>:normal</code>命令执行普通模式命令，但参数不能为表达式。</li>
<li><code>:execute &quot;normal &quot; . normal_commands</code>实现允许执行表达式结果普通模式命令。</li>
<li><code>eval()</code>函数只计算获取表达式的值而不执行。</li>
</ul>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h2><ul>
<li>使用<code>:call</code>命令调用函数。 在括号之间传入参数用逗号分隔。</li>
<li>函数能在表达式里调用</li>
</ul>
<h2 id="删除函数"><a href="#删除函数" class="headerlink" title="删除函数"></a>删除函数</h2><ul>
<li><code>:delfunction {name}</code>函数不存在时报错</li>
</ul>
<h2 id="函数引用"><a href="#函数引用" class="headerlink" title="函数引用"></a>函数引用</h2><ul>
<li><code>function()</code>这个函数可以把函数名转化成函数引用</li>
<li>注意：为了与内置函数区分开来，函数引用的变量首字母也要大写</li>
<li><code>call({funcRef}, {paramlist})</code>通过这个函数可以调用函数引用</li>
</ul>
<h2 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">:function &#123;name&#125;(&#123;var1&#125;, &#123;var2&#125;, ...)</div><div class="line">:  &#123;body&#125;</div><div class="line">:endfunction</div></pre></td></tr></table></figure>
<ul>
<li>函数名必须首字符大写</li>
<li>函数执行到<code>:endfunction</code>或者<code>:return</code>没有参数时，返回0</li>
<li><code>:function!</code>重定义已存在的函数</li>
</ul>
<h3 id="使用区域"><a href="#使用区域" class="headerlink" title="使用区域"></a>使用区域</h3><ul>
<li><code>:call</code>命令可以给一个行区域。</li>
<li>当函数用<code>range</code>关键字定义时，它会只关心行区域本身。</li>
<li>函数传递变量<code>a:firstline</code>和<code>a:lastline</code>，拥有函数调用区域的行数字。</li>
<li>另一种使用行区域的方法是定义不带<code>range</code>关键字的函数。函数对范围内的每行调用一次，光标在该行。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">:function Number()</div><div class="line">: echo &quot;line &quot; . line(&quot;.&quot;) . &quot; contains: &quot; . getline(&quot;.&quot;)</div><div class="line">:endfunction</div></pre></td></tr></table></figure>
<h3 id="可变数量参数"><a href="#可变数量参数" class="headerlink" title="可变数量参数"></a>可变数量参数</h3><ul>
<li>Vim允许你定义带可变数量参数的函数</li>
<li><code>a:1</code>包含第一个可选参数, <code>a:2</code>第二个，以此类推。<code>a:0</code>包含额外参数数量。</li>
<li><code>a:000</code>所有<code>...</code>参数的列表</li>
</ul>
<h3 id="列出函数"><a href="#列出函数" class="headerlink" title="列出函数"></a>列出函数</h3><ul>
<li><code>:function</code>列出所有用户定义函数的名字和参数</li>
<li><code>:function {funcname}</code>查看函数实现</li>
</ul>
<h2 id="函数列表"><a href="#函数列表" class="headerlink" title="函数列表"></a>函数列表</h2><h3 id="字符串操作："><a href="#字符串操作：" class="headerlink" title="字符串操作："></a>字符串操作：</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">nr2char()</td>
<td style="text-align:left">通过其ASCII值获取字符</td>
</tr>
<tr>
<td style="text-align:left">char2nr()</td>
<td style="text-align:left">获取字符的ASCII值</td>
</tr>
<tr>
<td style="text-align:left">str2nr()</td>
<td style="text-align:left">将字符串转换为数字</td>
</tr>
<tr>
<td style="text-align:left">str2float()</td>
<td style="text-align:left">将字符串转换为Float</td>
</tr>
<tr>
<td style="text-align:left">printf()</td>
<td style="text-align:left">根据％项格式化一个字符串</td>
</tr>
<tr>
<td style="text-align:left">escape()</td>
<td style="text-align:left">转义一个字符串中带有’\’的字符</td>
</tr>
<tr>
<td style="text-align:left">shellescape()</td>
<td style="text-align:left">转义一个用于shell命令的字符串</td>
</tr>
<tr>
<td style="text-align:left">fnameescape()</td>
<td style="text-align:left">转义用于Vim命令的文件名</td>
</tr>
<tr>
<td style="text-align:left">tr()</td>
<td style="text-align:left">将字符从一个集翻译成另一个集</td>
</tr>
<tr>
<td style="text-align:left">strtrans()</td>
<td style="text-align:left">翻译一个字符串，使其可打印</td>
</tr>
<tr>
<td style="text-align:left">tolower()</td>
<td style="text-align:left">将字符串转换为小写</td>
</tr>
<tr>
<td style="text-align:left">toupper()</td>
<td style="text-align:left">将字符串转换为大写</td>
</tr>
<tr>
<td style="text-align:left">match()</td>
<td style="text-align:left">位置，其中模式在字符串中匹配</td>
</tr>
<tr>
<td style="text-align:left">matchend()</td>
<td style="text-align:left">位置，其中模式匹配以字符串结尾</td>
</tr>
<tr>
<td style="text-align:left">matchstr()</td>
<td style="text-align:left">匹配字符串中的模式</td>
</tr>
<tr>
<td style="text-align:left">matchstrpos()</td>
<td style="text-align:left">匹配和字符串中模式的位置</td>
</tr>
<tr>
<td style="text-align:left">matchlist()</td>
<td style="text-align:left">像<code>matchstr()</code>并返回子匹配</td>
</tr>
<tr>
<td style="text-align:left">stridx()</td>
<td style="text-align:left">长字符串中的短字符串的第一个索引</td>
</tr>
<tr>
<td style="text-align:left">strridx()</td>
<td style="text-align:left">一个长字符串中的一个短字符串的最后一个索引</td>
</tr>
<tr>
<td style="text-align:left">strlen()</td>
<td style="text-align:left">字符串的长度（以字节为单位）</td>
</tr>
<tr>
<td style="text-align:left">strchars()</td>
<td style="text-align:left">字符串的长度</td>
</tr>
<tr>
<td style="text-align:left">strwidth()</td>
<td style="text-align:left">显示时字符串的大小</td>
</tr>
<tr>
<td style="text-align:left">strdisplaywidth()</td>
<td style="text-align:left">显示时字符串的大小，处理制表符</td>
</tr>
<tr>
<td style="text-align:left">substitute()</td>
<td style="text-align:left">用一个字符串替换模式匹配</td>
</tr>
<tr>
<td style="text-align:left">submatch()</td>
<td style="text-align:left">在<code>:s</code>和<code>substitute()</code>中获取特定的匹配项，</td>
</tr>
<tr>
<td style="text-align:left">strpart()</td>
<td style="text-align:left">使用字节索引获取字符串的一部分</td>
</tr>
<tr>
<td style="text-align:left">strcharpart()</td>
<td style="text-align:left">使用char索引获取字符串的一部分</td>
</tr>
<tr>
<td style="text-align:left">strgetchar()</td>
<td style="text-align:left">使用char索引从字符串中获取字符</td>
</tr>
<tr>
<td style="text-align:left">expand()</td>
<td style="text-align:left">展开特殊关键字</td>
</tr>
<tr>
<td style="text-align:left">iconv()</td>
<td style="text-align:left">将文本从一个编码转换为另一个</td>
</tr>
<tr>
<td style="text-align:left">byteidx()</td>
<td style="text-align:left">字符串中字符的字节索引</td>
</tr>
<tr>
<td style="text-align:left">byteidxcomp()</td>
<td style="text-align:left">像<code>byteidx()</code>但计算构成字符</td>
</tr>
<tr>
<td style="text-align:left">repeat()</td>
<td style="text-align:left">重复一个字符串多次</td>
</tr>
<tr>
<td style="text-align:left">eval()</td>
<td style="text-align:left">计算字符串表达式</td>
</tr>
<tr>
<td style="text-align:left">execute()</td>
<td style="text-align:left">执行Ex命令并获取输出</td>
</tr>
</tbody>
</table>
<h3 id="列表操作："><a href="#列表操作：" class="headerlink" title="列表操作："></a>列表操作：</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">get()</td>
<td style="text-align:left">得到一个没有错误的项目，错误的索引</td>
</tr>
<tr>
<td style="text-align:left">len()</td>
<td style="text-align:left">列表中的项目数</td>
</tr>
<tr>
<td style="text-align:left">empty()</td>
<td style="text-align:left">检查List是否为空</td>
</tr>
<tr>
<td style="text-align:left">insert()</td>
<td style="text-align:left">在List中的某个位置插入一个项目</td>
</tr>
<tr>
<td style="text-align:left">add()</td>
<td style="text-align:left">将一个项目附加到List</td>
</tr>
<tr>
<td style="text-align:left">extend()</td>
<td style="text-align:left">将列表附加到列表</td>
</tr>
<tr>
<td style="text-align:left">remove()</td>
<td style="text-align:left">从列表中删除一个或多个项目</td>
</tr>
<tr>
<td style="text-align:left">copy()</td>
<td style="text-align:left">创建一个List的浅拷贝</td>
</tr>
<tr>
<td style="text-align:left">deepcopy()</td>
<td style="text-align:left">创建一个列表的完整副本</td>
</tr>
<tr>
<td style="text-align:left">filter()</td>
<td style="text-align:left">从列表中删除所选项目</td>
</tr>
<tr>
<td style="text-align:left">map()</td>
<td style="text-align:left">更改每个List项</td>
</tr>
<tr>
<td style="text-align:left">sort()</td>
<td style="text-align:left">排序列表</td>
</tr>
<tr>
<td style="text-align:left">reverse()</td>
<td style="text-align:left">反转List的顺序</td>
</tr>
<tr>
<td style="text-align:left">uniq()</td>
<td style="text-align:left">删除重复的邻近项目的副本</td>
</tr>
<tr>
<td style="text-align:left">split()</td>
<td style="text-align:left">将一个String拆分成一个List</td>
</tr>
<tr>
<td style="text-align:left">join()</td>
<td style="text-align:left">将列表项目转换为String</td>
</tr>
<tr>
<td style="text-align:left">range()</td>
<td style="text-align:left">返回一个包含数字序列的List</td>
</tr>
<tr>
<td style="text-align:left">string()</td>
<td style="text-align:left">List的字符串表示形式</td>
</tr>
<tr>
<td style="text-align:left">call()</td>
<td style="text-align:left">调用List作为参数的函数</td>
</tr>
<tr>
<td style="text-align:left">index()</td>
<td style="text-align:left">列表中值的索引</td>
</tr>
<tr>
<td style="text-align:left">max()</td>
<td style="text-align:left">最大值</td>
</tr>
<tr>
<td style="text-align:left">min()</td>
<td style="text-align:left">最小值</td>
</tr>
<tr>
<td style="text-align:left">count()</td>
<td style="text-align:left">count一个值出现在列表中的次数</td>
</tr>
<tr>
<td style="text-align:left">repeat()</td>
<td style="text-align:left">重复一个List多次</td>
</tr>
</tbody>
</table>
<h3 id="字典操作："><a href="#字典操作：" class="headerlink" title="字典操作："></a>字典操作：</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">get()</td>
<td style="text-align:left">获取一个条目，没有错误的错误键</td>
</tr>
<tr>
<td style="text-align:left">len()</td>
<td style="text-align:left">在Dictionary中的条目数</td>
</tr>
<tr>
<td style="text-align:left">has_key()</td>
<td style="text-align:left">检查一个键是否出现在Dictionary中</td>
</tr>
<tr>
<td style="text-align:left">empty()</td>
<td style="text-align:left">检查Dictionary是否为空</td>
</tr>
<tr>
<td style="text-align:left">remove()</td>
<td style="text-align:left">从Dictionary中删除一个条目</td>
</tr>
<tr>
<td style="text-align:left">extend()</td>
<td style="text-align:left">将一个字典中的条目添加到另一个</td>
</tr>
<tr>
<td style="text-align:left">filter()</td>
<td style="text-align:left">从Dictionary中删除选定的条目</td>
</tr>
<tr>
<td style="text-align:left">map()</td>
<td style="text-align:left">更改每个Dictionary条目</td>
</tr>
<tr>
<td style="text-align:left">keys()</td>
<td style="text-align:left">获取字典键列表</td>
</tr>
<tr>
<td style="text-align:left">values()</td>
<td style="text-align:left">获取字典值列表</td>
</tr>
<tr>
<td style="text-align:left">items()</td>
<td style="text-align:left">获取字典键值对列表</td>
</tr>
<tr>
<td style="text-align:left">copy()</td>
<td style="text-align:left">做一个字典的浅拷贝</td>
</tr>
<tr>
<td style="text-align:left">deepcopy()</td>
<td style="text-align:left">创建一个字典的完整副本</td>
</tr>
<tr>
<td style="text-align:left">string()</td>
<td style="text-align:left">字典的字符串表示形式</td>
</tr>
<tr>
<td style="text-align:left">max()</td>
<td style="text-align:left">在Dictionary中的最大值</td>
</tr>
<tr>
<td style="text-align:left">min()</td>
<td style="text-align:left">最小值</td>
</tr>
<tr>
<td style="text-align:left">count()</td>
<td style="text-align:left">count一个值出现的次数</td>
</tr>
</tbody>
</table>
<h3 id="浮点计算"><a href="#浮点计算" class="headerlink" title="浮点计算"></a>浮点计算</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">float2nr()</td>
<td style="text-align:left">将Float转换为Number</td>
</tr>
<tr>
<td style="text-align:left">abs()</td>
<td style="text-align:left">绝对值（也适用于Number）</td>
</tr>
<tr>
<td style="text-align:left">round()</td>
<td style="text-align:left">舍入</td>
</tr>
<tr>
<td style="text-align:left">ceil()</td>
<td style="text-align:left">向上舍入</td>
</tr>
<tr>
<td style="text-align:left">floor()</td>
<td style="text-align:left">向下舍入</td>
</tr>
<tr>
<td style="text-align:left">trunc()</td>
<td style="text-align:left">删除小数点后的值</td>
</tr>
<tr>
<td style="text-align:left">fmod()</td>
<td style="text-align:left">除法的余数</td>
</tr>
<tr>
<td style="text-align:left">exp()</td>
<td style="text-align:left">指数</td>
</tr>
<tr>
<td style="text-align:left">log()</td>
<td style="text-align:left">自然对数（以e为底的对数）</td>
</tr>
<tr>
<td style="text-align:left">log10()</td>
<td style="text-align:left">对数以10为底</td>
</tr>
<tr>
<td style="text-align:left">pow()</td>
<td style="text-align:left">值x到指数y</td>
</tr>
<tr>
<td style="text-align:left">sqrt()</td>
<td style="text-align:left">平方根</td>
</tr>
<tr>
<td style="text-align:left">sin()</td>
<td style="text-align:left">正弦</td>
</tr>
<tr>
<td style="text-align:left">cos()</td>
<td style="text-align:left">余弦</td>
</tr>
<tr>
<td style="text-align:left">tan()</td>
<td style="text-align:left">切线</td>
</tr>
<tr>
<td style="text-align:left">asin()</td>
<td style="text-align:left">反正弦</td>
</tr>
<tr>
<td style="text-align:left">acos()</td>
<td style="text-align:left">反余弦</td>
</tr>
<tr>
<td style="text-align:left">atan()</td>
<td style="text-align:left">反正切</td>
</tr>
<tr>
<td style="text-align:left">atan2()</td>
<td style="text-align:left">反正切</td>
</tr>
<tr>
<td style="text-align:left">sinh()</td>
<td style="text-align:left">双曲正弦</td>
</tr>
<tr>
<td style="text-align:left">cosh()</td>
<td style="text-align:left">双曲余弦</td>
</tr>
<tr>
<td style="text-align:left">tanh()</td>
<td style="text-align:left">双曲正切</td>
</tr>
<tr>
<td style="text-align:left">isnan()</td>
<td style="text-align:left">检查不是一个数字</td>
</tr>
</tbody>
</table>
<h3 id="其它计算"><a href="#其它计算" class="headerlink" title="其它计算"></a>其它计算</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">and()</td>
<td style="text-align:left">按位与</td>
</tr>
<tr>
<td style="text-align:left">invert()</td>
<td style="text-align:left">按位反转</td>
</tr>
<tr>
<td style="text-align:left">or()</td>
<td style="text-align:left">按位或</td>
</tr>
<tr>
<td style="text-align:left">xor()</td>
<td style="text-align:left">按位异或</td>
</tr>
<tr>
<td style="text-align:left">sha256()</td>
<td style="text-align:left">SHA-256哈希</td>
</tr>
</tbody>
</table>
<h3 id="变量-1"><a href="#变量-1" class="headerlink" title="变量"></a>变量</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">type()</td>
<td style="text-align:left">类型的变量</td>
</tr>
<tr>
<td style="text-align:left">islocked()</td>
<td style="text-align:left">检查变量是否被锁定</td>
</tr>
<tr>
<td style="text-align:left">function()</td>
<td style="text-align:left">获取函数名的Funcref</td>
</tr>
<tr>
<td style="text-align:left">getbufvar()</td>
<td style="text-align:left">从特定缓冲区获取变量值</td>
</tr>
<tr>
<td style="text-align:left">setbufvar()</td>
<td style="text-align:left">在一个特定的缓冲区中设置一个变量</td>
</tr>
<tr>
<td style="text-align:left">getwinvar()</td>
<td style="text-align:left">从特定窗口获取变量</td>
</tr>
<tr>
<td style="text-align:left">gettabvar()</td>
<td style="text-align:left">从特定标签页获取一个变量</td>
</tr>
<tr>
<td style="text-align:left">gettabwinvar()</td>
<td style="text-align:left">从特定窗口和标签页获取一个变量</td>
</tr>
<tr>
<td style="text-align:left">setwinvar()</td>
<td style="text-align:left">在一个特定的窗口中设置一个变量</td>
</tr>
<tr>
<td style="text-align:left">settabvar()</td>
<td style="text-align:left">在一个特定的标签页中设置一个变量</td>
</tr>
<tr>
<td style="text-align:left">settabwinvar()</td>
<td style="text-align:left">在一个特定的窗口和标签页中设置一个变量</td>
</tr>
<tr>
<td style="text-align:left">garbagecollect()</td>
<td style="text-align:left">尽可能释放内存</td>
</tr>
</tbody>
</table>
<h3 id="光标和标志位置"><a href="#光标和标志位置" class="headerlink" title="光标和标志位置"></a>光标和标志位置</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">col()</td>
<td style="text-align:left">列号或一个标记</td>
</tr>
<tr>
<td style="text-align:left">virtcol()</td>
<td style="text-align:left">屏幕列的光标或标记</td>
</tr>
<tr>
<td style="text-align:left">line()</td>
<td style="text-align:left">行号的光标或标记</td>
</tr>
<tr>
<td style="text-align:left">wincol()</td>
<td style="text-align:left">窗口列的光标号</td>
</tr>
<tr>
<td style="text-align:left">winline()</td>
<td style="text-align:left">窗口中光标的行号</td>
</tr>
<tr>
<td style="text-align:left">cursor()</td>
<td style="text-align:left">将光标定位在一行/列</td>
</tr>
<tr>
<td style="text-align:left">screencol()</td>
<td style="text-align:left">获取屏幕列的光标</td>
</tr>
<tr>
<td style="text-align:left">screenrow()</td>
<td style="text-align:left">获取光标的屏幕行</td>
</tr>
<tr>
<td style="text-align:left">getcurpos()</td>
<td style="text-align:left">获取光标的位置</td>
</tr>
<tr>
<td style="text-align:left">getpos()</td>
<td style="text-align:left">获取光标，标记等的位置。</td>
</tr>
<tr>
<td style="text-align:left">setpos()</td>
<td style="text-align:left">设置光标，标记等的位置</td>
</tr>
<tr>
<td style="text-align:left">byte2line()</td>
<td style="text-align:left">获取特定字节计数的行号</td>
</tr>
<tr>
<td style="text-align:left">line2byte()</td>
<td style="text-align:left">在特定行的字节计数</td>
</tr>
<tr>
<td style="text-align:left">diff_filler()</td>
<td style="text-align:left">获取行之上的填充行数</td>
</tr>
<tr>
<td style="text-align:left">screenattr()</td>
<td style="text-align:left">获取屏幕线/行的属性</td>
</tr>
<tr>
<td style="text-align:left">screenchar()</td>
<td style="text-align:left">在屏幕行/行获取字符代码</td>
</tr>
</tbody>
</table>
<h3 id="使用当前缓冲区的文本"><a href="#使用当前缓冲区的文本" class="headerlink" title="使用当前缓冲区的文本"></a>使用当前缓冲区的文本</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">getline()</td>
<td style="text-align:left">从缓冲区中获取行或行的列表</td>
</tr>
<tr>
<td style="text-align:left">setline()</td>
<td style="text-align:left">替换缓冲区中的一行</td>
</tr>
<tr>
<td style="text-align:left">append()</td>
<td style="text-align:left">在缓冲区中追加行或行列表</td>
</tr>
<tr>
<td style="text-align:left">indent()</td>
<td style="text-align:left">缩进特定行</td>
</tr>
<tr>
<td style="text-align:left">cindent()</td>
<td style="text-align:left">缩进根据C缩进</td>
</tr>
<tr>
<td style="text-align:left">lispindent()</td>
<td style="text-align:left">缩进根据Lisp缩进</td>
</tr>
<tr>
<td style="text-align:left">nextnonblank()</td>
<td style="text-align:left">找到下一个非空行</td>
</tr>
<tr>
<td style="text-align:left">prevnonblank()</td>
<td style="text-align:left">找到上一个非空行</td>
</tr>
<tr>
<td style="text-align:left">search()</td>
<td style="text-align:left">找到一个模式的匹配</td>
</tr>
<tr>
<td style="text-align:left">searchpos()</td>
<td style="text-align:left">找到一个模式的匹配</td>
</tr>
<tr>
<td style="text-align:left">searchpair()</td>
<td style="text-align:left">找到另一端的开始/跳过/结束</td>
</tr>
<tr>
<td style="text-align:left">searchpairpos()</td>
<td style="text-align:left">找到开始/跳过/结束的另一端</td>
</tr>
<tr>
<td style="text-align:left">searchdecl()</td>
<td style="text-align:left">搜索名称的声明</td>
</tr>
<tr>
<td style="text-align:left">getcharsearch()</td>
<td style="text-align:left">返回字符搜索信息</td>
</tr>
<tr>
<td style="text-align:left">setcharsearch()</td>
<td style="text-align:left">设置字符搜索信息</td>
</tr>
</tbody>
</table>
<h3 id="系统功能和文件操作"><a href="#系统功能和文件操作" class="headerlink" title="系统功能和文件操作"></a>系统功能和文件操作</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">glob()</td>
<td style="text-align:left">展开通配符</td>
</tr>
<tr>
<td style="text-align:left">globpath()</td>
<td style="text-align:left">在许多目录中展开通配符</td>
</tr>
<tr>
<td style="text-align:left">glob2regpat()</td>
<td style="text-align:left">将glob模式转换为搜索模式</td>
</tr>
<tr>
<td style="text-align:left">findfile()</td>
<td style="text-align:left">在目录列表中找到一个文件</td>
</tr>
<tr>
<td style="text-align:left">finddir()</td>
<td style="text-align:left">在目录列表中找到一个目录</td>
</tr>
<tr>
<td style="text-align:left">resolve()</td>
<td style="text-align:left">找出快捷方式指向的位置</td>
</tr>
<tr>
<td style="text-align:left">fnamemodify()</td>
<td style="text-align:left">修改文件名</td>
</tr>
<tr>
<td style="text-align:left">pathshorten()</td>
<td style="text-align:left">缩短路径中的目录名</td>
</tr>
<tr>
<td style="text-align:left">simplify()</td>
<td style="text-align:left">简化路径而不改变其含义</td>
</tr>
<tr>
<td style="text-align:left">executable()</td>
<td style="text-align:left">检查可执行程序是否存在</td>
</tr>
<tr>
<td style="text-align:left">exepath()</td>
<td style="text-align:left">可执行程序的完整路径</td>
</tr>
<tr>
<td style="text-align:left">filereadable()</td>
<td style="text-align:left">检查是否可以读取文件</td>
</tr>
<tr>
<td style="text-align:left">filewritable()</td>
<td style="text-align:left">检查是否可以写入文件</td>
</tr>
<tr>
<td style="text-align:left">getfperm()</td>
<td style="text-align:left">获取文件的权限</td>
</tr>
<tr>
<td style="text-align:left">setfperm()</td>
<td style="text-align:left">设置文件的权限</td>
</tr>
<tr>
<td style="text-align:left">getftype()</td>
<td style="text-align:left">获取文件的种类</td>
</tr>
<tr>
<td style="text-align:left">isdirectory()</td>
<td style="text-align:left">检查目录是否存在</td>
</tr>
<tr>
<td style="text-align:left">getfsize()</td>
<td style="text-align:left">获取文件的大小</td>
</tr>
<tr>
<td style="text-align:left">getcwd()</td>
<td style="text-align:left">获取当前工作目录</td>
</tr>
<tr>
<td style="text-align:left">haslocaldir()</td>
<td style="text-align:left">检查当前窗口是否使<code>:lcd</code>用</td>
</tr>
<tr>
<td style="text-align:left">tempname()</td>
<td style="text-align:left">获取临时文件的名称</td>
</tr>
<tr>
<td style="text-align:left">mkdir()</td>
<td style="text-align:left">创建一个新目录</td>
</tr>
<tr>
<td style="text-align:left">delete()</td>
<td style="text-align:left">删除文件</td>
</tr>
<tr>
<td style="text-align:left">rename()</td>
<td style="text-align:left">重命名文件</td>
</tr>
<tr>
<td style="text-align:left">system()</td>
<td style="text-align:left">获取shell命令的结果作为字符串</td>
</tr>
<tr>
<td style="text-align:left">systemlist()</td>
<td style="text-align:left">获取shell命令的结果作为列表</td>
</tr>
<tr>
<td style="text-align:left">hostname()</td>
<td style="text-align:left">系统的名称</td>
</tr>
<tr>
<td style="text-align:left">readfile()</td>
<td style="text-align:left">将一个文件读入一个List行</td>
</tr>
<tr>
<td style="text-align:left">writefile()</td>
<td style="text-align:left">将一行List写入一个文件</td>
</tr>
</tbody>
</table>
<h3 id="日期和时间"><a href="#日期和时间" class="headerlink" title="日期和时间"></a>日期和时间</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">getftime()</td>
<td style="text-align:left">获取文件的最后修改时间</td>
</tr>
<tr>
<td style="text-align:left">localtime()</td>
<td style="text-align:left">获取当前时间（秒）</td>
</tr>
<tr>
<td style="text-align:left">strftime()</td>
<td style="text-align:left">将时间转换为字符串</td>
</tr>
<tr>
<td style="text-align:left">reltime()</td>
<td style="text-align:left">准确地获取当前或逝去的时间</td>
</tr>
<tr>
<td style="text-align:left">reltimestr()</td>
<td style="text-align:left">将<code>reltime()</code>的结果转换为字符串</td>
</tr>
<tr>
<td style="text-align:left">reltimefloat()</td>
<td style="text-align:left">将<code>reltime()</code>结果转换为Float</td>
</tr>
</tbody>
</table>
<h3 id="缓冲区，窗口和参数列表"><a href="#缓冲区，窗口和参数列表" class="headerlink" title="缓冲区，窗口和参数列表"></a>缓冲区，窗口和参数列表</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">argc()</td>
<td style="text-align:left">参数列表中的条目数</td>
</tr>
<tr>
<td style="text-align:left">argidx()</td>
<td style="text-align:left">当前位置在参数列表中</td>
</tr>
<tr>
<td style="text-align:left">arglistid()</td>
<td style="text-align:left">获取参数列表的id</td>
</tr>
<tr>
<td style="text-align:left">argv()</td>
<td style="text-align:left">从参数列表中获取一个条目</td>
</tr>
<tr>
<td style="text-align:left">bufexists()</td>
<td style="text-align:left">检查是否存在缓冲区</td>
</tr>
<tr>
<td style="text-align:left">buflisted()</td>
<td style="text-align:left">检查是否存在并列出了缓冲区</td>
</tr>
<tr>
<td style="text-align:left">bufloaded()</td>
<td style="text-align:left">检查缓冲区是否存在并且已加载</td>
</tr>
<tr>
<td style="text-align:left">bufname()</td>
<td style="text-align:left">获取特定缓冲区的名称</td>
</tr>
<tr>
<td style="text-align:left">bufnr()</td>
<td style="text-align:left">获取特定缓冲区的缓冲区号</td>
</tr>
<tr>
<td style="text-align:left">tabpagebuflist()</td>
<td style="text-align:left">return标签页中的缓冲区列表</td>
</tr>
<tr>
<td style="text-align:left">tabpagenr()</td>
<td style="text-align:left">获取标签页的编号</td>
</tr>
<tr>
<td style="text-align:left">tabpagewinnr()</td>
<td style="text-align:left">像 <code>winner()</code>用于特定标签页</td>
</tr>
<tr>
<td style="text-align:left">winner()</td>
<td style="text-align:left">获取当前窗口的窗口编号</td>
</tr>
<tr>
<td style="text-align:left">bufwinid()</td>
<td style="text-align:left">获取特定缓冲区的窗口ID</td>
</tr>
<tr>
<td style="text-align:left">bufwinnr()</td>
<td style="text-align:left">获取特定缓冲区的窗口编号</td>
</tr>
<tr>
<td style="text-align:left">winbufnr()</td>
<td style="text-align:left">获取特定窗口的缓冲区号</td>
</tr>
<tr>
<td style="text-align:left">getbufline()</td>
<td style="text-align:left">从指定的缓冲区中获取行的列表</td>
</tr>
<tr>
<td style="text-align:left">win_findbuf()</td>
<td style="text-align:left">查找包含缓冲区的窗口</td>
</tr>
<tr>
<td style="text-align:left">win_getid()</td>
<td style="text-align:left">获取窗口的窗口ID</td>
</tr>
<tr>
<td style="text-align:left">win_gotoid()</td>
<td style="text-align:left">转到带有ID的窗口</td>
</tr>
<tr>
<td style="text-align:left">win_id2tabwin()</td>
<td style="text-align:left">从窗口ID获取选项卡和窗口nr</td>
</tr>
<tr>
<td style="text-align:left">win_id2win()</td>
<td style="text-align:left">从窗口ID获取窗口nr</td>
</tr>
<tr>
<td style="text-align:left">getbufinfo()</td>
<td style="text-align:left">获取包含缓冲区信息的列表</td>
</tr>
<tr>
<td style="text-align:left">gettabinfo()</td>
<td style="text-align:left">获取带有标签页信息的列表</td>
</tr>
<tr>
<td style="text-align:left">getwininfo()</td>
<td style="text-align:left">获取带有窗口信息的列表</td>
</tr>
</tbody>
</table>
<h3 id="命令行"><a href="#命令行" class="headerlink" title="命令行"></a>命令行</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">getcmdline()</td>
<td style="text-align:left">获取当前命令行</td>
</tr>
<tr>
<td style="text-align:left">getcmdpos()</td>
<td style="text-align:left">获取光标在命令行中的位置</td>
</tr>
<tr>
<td style="text-align:left">setcmdpos()</td>
<td style="text-align:left">设置光标在命令行中的位置</td>
</tr>
<tr>
<td style="text-align:left">getcmdtype()</td>
<td style="text-align:left">返回当前的命令行类型</td>
</tr>
<tr>
<td style="text-align:left">getcmdwintype()</td>
<td style="text-align:left">返回当前命令行窗口类型</td>
</tr>
<tr>
<td style="text-align:left">getcompletion()</td>
<td style="text-align:left">命令行完成匹配列表</td>
</tr>
</tbody>
</table>
<h3 id="快速修复和位置列表"><a href="#快速修复和位置列表" class="headerlink" title="快速修复和位置列表"></a>快速修复和位置列表</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">getqflist()</td>
<td style="text-align:left">quickfix错误列表</td>
</tr>
<tr>
<td style="text-align:left">setqflist()</td>
<td style="text-align:left">修改quickfix列表</td>
</tr>
<tr>
<td style="text-align:left">getloclist()</td>
<td style="text-align:left">列出位置列表项</td>
</tr>
<tr>
<td style="text-align:left">setloclist()</td>
<td style="text-align:left">修改位置列表</td>
</tr>
</tbody>
</table>
<h3 id="插入模式补全"><a href="#插入模式补全" class="headerlink" title="插入模式补全"></a>插入模式补全</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">complete()</td>
<td style="text-align:left">设置找到的匹配项</td>
</tr>
<tr>
<td style="text-align:left">complete_add()</td>
<td style="text-align:left">添加找到的匹配项</td>
</tr>
<tr>
<td style="text-align:left">complete_check()</td>
<td style="text-align:left">检查是否应该中止完成</td>
</tr>
<tr>
<td style="text-align:left">pumvisible()</td>
<td style="text-align:left">检查是否显示弹出菜单</td>
</tr>
</tbody>
</table>
<h3 id="折叠"><a href="#折叠" class="headerlink" title="折叠"></a>折叠</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">foldclosed()</td>
<td style="text-align:left">检查特定行处的折叠</td>
</tr>
<tr>
<td style="text-align:left">foldclosedend()</td>
<td style="text-align:left">像 <code>foldclosed()</code>但返回最后一行</td>
</tr>
<tr>
<td style="text-align:left">foldlevel()</td>
<td style="text-align:left">检查特定行的折叠级别</td>
</tr>
<tr>
<td style="text-align:left">foldtext()</td>
<td style="text-align:left">生成为封闭折叠显示的线</td>
</tr>
<tr>
<td style="text-align:left">foldtextresult()</td>
<td style="text-align:left">获取关闭折叠显示的文本</td>
</tr>
</tbody>
</table>
<h3 id="语法和高亮"><a href="#语法和高亮" class="headerlink" title="语法和高亮"></a>语法和高亮</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">clearmatches()</td>
<td style="text-align:left">清除由<code>matchadd()</code>定义的所有匹配 和 <code>:match</code> 命令</td>
</tr>
<tr>
<td style="text-align:left">getmatches()</td>
<td style="text-align:left">获取由 <code>matchadd()</code>  定义的所有匹配 和 <code>:match</code>  命令</td>
</tr>
<tr>
<td style="text-align:left">hlexists()</td>
<td style="text-align:left">检查高亮组是否存在</td>
</tr>
<tr>
<td style="text-align:left">hlID()</td>
<td style="text-align:left">获取高亮组的ID</td>
</tr>
<tr>
<td style="text-align:left">synID()</td>
<td style="text-align:left">获取特定位置的语法ID</td>
</tr>
<tr>
<td style="text-align:left">syndICate()</td>
<td style="text-align:left">获取语法ID的特定属性</td>
</tr>
<tr>
<td style="text-align:left">synIDtrans()</td>
<td style="text-align:left">获取翻译的语法ID</td>
</tr>
<tr>
<td style="text-align:left">synstack()</td>
<td style="text-align:left">获取特定位置的语法ID列表</td>
</tr>
<tr>
<td style="text-align:left">synconcealed()</td>
<td style="text-align:left">获取有关隐藏的信息</td>
</tr>
<tr>
<td style="text-align:left">diff_hlID()</td>
<td style="text-align:left">获取位置处diff模式的高亮ID</td>
</tr>
<tr>
<td style="text-align:left">mathcad()</td>
<td style="text-align:left">定义一个模式来突出显示（“匹配”）</td>
</tr>
<tr>
<td style="text-align:left">matchaddpos()</td>
<td style="text-align:left">定义要突出显示的位置列表</td>
</tr>
<tr>
<td style="text-align:left">matcharg()</td>
<td style="text-align:left">获取有关<code>:match</code> 的信息 参数</td>
</tr>
<tr>
<td style="text-align:left">matchdelete()</td>
<td style="text-align:left">删除由 <code>matchadd()</code> 定义的匹配 或 <code>:match</code> 命令</td>
</tr>
<tr>
<td style="text-align:left">setmatches()</td>
<td style="text-align:left">恢复由保存的匹配列表 <code>getmatches()</code></td>
</tr>
</tbody>
</table>
<h3 id="拼写"><a href="#拼写" class="headerlink" title="拼写"></a>拼写</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">spellbadword()</td>
<td style="text-align:left">定位在光标处或之后的拼写错误的单词</td>
</tr>
<tr>
<td style="text-align:left">spellsuggest()</td>
<td style="text-align:left">返回建议的拼写更正</td>
</tr>
<tr>
<td style="text-align:left">soundfold()</td>
<td style="text-align:left">返回一个词的声音a类似的等价物</td>
</tr>
</tbody>
</table>
<h3 id="历史"><a href="#历史" class="headerlink" title="历史"></a>历史</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">histadd()</td>
<td style="text-align:left">向历史添加项目</td>
</tr>
<tr>
<td style="text-align:left">histdel()</td>
<td style="text-align:left">从历史记录中删除项目</td>
</tr>
<tr>
<td style="text-align:left">histget()</td>
<td style="text-align:left">从历史记录中获取项目</td>
</tr>
<tr>
<td style="text-align:left">histnr()</td>
<td style="text-align:left">获取历史列表的最高索引</td>
</tr>
</tbody>
</table>
<h3 id="互动"><a href="#互动" class="headerlink" title="互动"></a>互动</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">browse()</td>
<td style="text-align:left">放置一个文件请求者</td>
</tr>
<tr>
<td style="text-align:left">browsedir()</td>
<td style="text-align:left">放了一个目录请求者</td>
</tr>
<tr>
<td style="text-align:left">confirm()</td>
<td style="text-align:left">让用户做出选择</td>
</tr>
<tr>
<td style="text-align:left">getchar()</td>
<td style="text-align:left">从用户获取一个字符</td>
</tr>
<tr>
<td style="text-align:left">getcharmod()</td>
<td style="text-align:left">获取最后一个输入字符的修饰符</td>
</tr>
<tr>
<td style="text-align:left">feedkeys()</td>
<td style="text-align:left">将字符放在预先排队的队列中</td>
</tr>
<tr>
<td style="text-align:left">input()</td>
<td style="text-align:left">从用户获取一行</td>
</tr>
<tr>
<td style="text-align:left">inputlist()</td>
<td style="text-align:left">让用户从列表中选择一个条目</td>
</tr>
<tr>
<td style="text-align:left">inputsecret()</td>
<td style="text-align:left">从用户获取一行而不显示它</td>
</tr>
<tr>
<td style="text-align:left">inputdialog()</td>
<td style="text-align:left">在对话框中从用户获取一行</td>
</tr>
<tr>
<td style="text-align:left">inputsave()</td>
<td style="text-align:left">保存和清除typeahead</td>
</tr>
<tr>
<td style="text-align:left">inputrestore()</td>
<td style="text-align:left">恢复typeahead</td>
</tr>
</tbody>
</table>
<h3 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">getfontname()</td>
<td style="text-align:left">获取当前正在使用的字体的名称</td>
</tr>
<tr>
<td style="text-align:left">getwinposx()</td>
<td style="text-align:left">GUI Vim窗口的X位置</td>
</tr>
<tr>
<td style="text-align:left">getwinposy()</td>
<td style="text-align:left">Y GUI的Vim窗口的位置</td>
</tr>
</tbody>
</table>
<h3 id="VIM服务器"><a href="#VIM服务器" class="headerlink" title="VIM服务器"></a>VIM服务器</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">serverlist()</td>
<td style="text-align:left">返回服务器名称的列表</td>
</tr>
<tr>
<td style="text-align:left">remote_send()</td>
<td style="text-align:left">向Vim服务器发送命令字符</td>
</tr>
<tr>
<td style="text-align:left">remote_expr()</td>
<td style="text-align:left">计算Vim服务器中的表达式</td>
</tr>
<tr>
<td style="text-align:left">server2client()</td>
<td style="text-align:left">向Vim服务器的客户端发送回复</td>
</tr>
<tr>
<td style="text-align:left">remote_peek()</td>
<td style="text-align:left">检查是否有来自Vim服务器的回复</td>
</tr>
<tr>
<td style="text-align:left">remote_read()</td>
<td style="text-align:left">从Vim服务器读取回复</td>
</tr>
<tr>
<td style="text-align:left">foreground()</td>
<td style="text-align:left">将Vim窗口移动到前台</td>
</tr>
<tr>
<td style="text-align:left">remote_foreground()</td>
<td style="text-align:left">将Vim服务器窗口移动到前台</td>
</tr>
</tbody>
</table>
<h3 id="窗口大小和位置"><a href="#窗口大小和位置" class="headerlink" title="窗口大小和位置"></a>窗口大小和位置</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">winheight()</td>
<td style="text-align:left">获取特定窗口的高度</td>
</tr>
<tr>
<td style="text-align:left">winwidth()</td>
<td style="text-align:left">获取特定窗口的宽度</td>
</tr>
<tr>
<td style="text-align:left">winrestcmd()</td>
<td style="text-align:left">return命令恢复窗口大小</td>
</tr>
<tr>
<td style="text-align:left">winsaveview()</td>
<td style="text-align:left">获取当前窗口的视图</td>
</tr>
<tr>
<td style="text-align:left">winrestview()</td>
<td style="text-align:left">恢复当前窗口的保存视图</td>
</tr>
</tbody>
</table>
<h3 id="映射"><a href="#映射" class="headerlink" title="映射"></a>映射</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">hasmapto()</td>
<td style="text-align:left">检查是否存在映射</td>
</tr>
<tr>
<td style="text-align:left">mapcheck()</td>
<td style="text-align:left">检查是否存在匹配的映射</td>
</tr>
<tr>
<td style="text-align:left">maparg()</td>
<td style="text-align:left">获取映射的rhs</td>
</tr>
<tr>
<td style="text-align:left">wildmenumode()</td>
<td style="text-align:left">检查wildmode是否处于活动状态</td>
</tr>
</tbody>
</table>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">assert_equal()</td>
<td style="text-align:left">断言两个表达式的值相等</td>
</tr>
<tr>
<td style="text-align:left">assert_notequal()</td>
<td style="text-align:left">断言两个表达式的值不相等</td>
</tr>
<tr>
<td style="text-align:left">assert_inrange()</td>
<td style="text-align:left">断言表达式在范围内</td>
</tr>
<tr>
<td style="text-align:left">assert_match()</td>
<td style="text-align:left">断言模式匹配该值</td>
</tr>
<tr>
<td style="text-align:left">assert_notmatch()</td>
<td style="text-align:left">断言模式与值不匹配</td>
</tr>
<tr>
<td style="text-align:left">assert_false()</td>
<td style="text-align:left">断言表达式为false</td>
</tr>
<tr>
<td style="text-align:left">assert_true()</td>
<td style="text-align:left">断言表达式为true</td>
</tr>
<tr>
<td style="text-align:left">assert_exception()</td>
<td style="text-align:left">断言命令抛出异常</td>
</tr>
<tr>
<td style="text-align:left">assert_fails()</td>
<td style="text-align:left">断言函数调用失败</td>
</tr>
<tr>
<td style="text-align:left">test_alloc_fail()</td>
<td style="text-align:left">使内存分配失败</td>
</tr>
<tr>
<td style="text-align:left">test_autochdir()</td>
<td style="text-align:left">在启动期间启用<code>autochdir</code></td>
</tr>
<tr>
<td style="text-align:left">test_disable_char_avail()</td>
<td style="text-align:left">测试没有typeahead</td>
</tr>
<tr>
<td style="text-align:left">test_garbagecollect_now()</td>
<td style="text-align:left">可用内存</td>
</tr>
<tr>
<td style="text-align:left">test_null_channel()</td>
<td style="text-align:left">返回一个null通道</td>
</tr>
<tr>
<td style="text-align:left">test_null_dict()</td>
<td style="text-align:left">返回一个空Dict</td>
</tr>
<tr>
<td style="text-align:left">test_null_job()</td>
<td style="text-align:left">返回一个空作业</td>
</tr>
<tr>
<td style="text-align:left">test_null_list()</td>
<td style="text-align:left">返回一个空列表</td>
</tr>
<tr>
<td style="text-align:left">test_null_partial()</td>
<td style="text-align:left">返回一个零部分函数</td>
</tr>
<tr>
<td style="text-align:left">test_null_string()</td>
<td style="text-align:left">返回一个空字符串</td>
</tr>
</tbody>
</table>
<h3 id="进程间通信"><a href="#进程间通信" class="headerlink" title="进程间通信"></a>进程间通信</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ch_open()</td>
<td style="text-align:left">打开一个通道</td>
</tr>
<tr>
<td style="text-align:left">ch_close()</td>
<td style="text-align:left">关闭一个通道</td>
</tr>
<tr>
<td style="text-align:left">ch_read()</td>
<td style="text-align:left">从通道读取消息</td>
</tr>
<tr>
<td style="text-align:left">ch_readraw()</td>
<td style="text-align:left">从通道读取原始消息</td>
</tr>
<tr>
<td style="text-align:left">ch_sendexpr()</td>
<td style="text-align:left">通过通道发送JSON消息</td>
</tr>
<tr>
<td style="text-align:left">ch_sendraw()</td>
<td style="text-align:left">通过通道发送原始消息</td>
</tr>
<tr>
<td style="text-align:left">ch_evalexpr()</td>
<td style="text-align:left">通过通道评估表达式</td>
</tr>
<tr>
<td style="text-align:left">ch_evalraw()</td>
<td style="text-align:left">通过通道评估原始字符串</td>
</tr>
<tr>
<td style="text-align:left">ch_status()</td>
<td style="text-align:left">获取通道的状态</td>
</tr>
<tr>
<td style="text-align:left">ch_getbufnr()</td>
<td style="text-align:left">获取通道的缓冲区号</td>
</tr>
<tr>
<td style="text-align:left">ch_getjob()</td>
<td style="text-align:left">获取与通道相关联的作业</td>
</tr>
<tr>
<td style="text-align:left">ch_info()</td>
<td style="text-align:left">获取通道信息</td>
</tr>
<tr>
<td style="text-align:left">ch_log()</td>
<td style="text-align:left">在通道日志文件中写入一条消息</td>
</tr>
<tr>
<td style="text-align:left">ch_logfile()</td>
<td style="text-align:left">设置通道日志文件</td>
</tr>
<tr>
<td style="text-align:left">ch_setoptions()</td>
<td style="text-align:left">设置通道的选项</td>
</tr>
<tr>
<td style="text-align:left">json_encode()</td>
<td style="text-align:left">将表达式编码为JSON字符串</td>
</tr>
<tr>
<td style="text-align:left">json_decode()</td>
<td style="text-align:left">将JSON字符串解码为Vim类型</td>
</tr>
<tr>
<td style="text-align:left">js_encode()</td>
<td style="text-align:left">将表达式编码为JSON字符串</td>
</tr>
<tr>
<td style="text-align:left">js_decode()</td>
<td style="text-align:left">将JSON字符串解码为Vim类型</td>
</tr>
</tbody>
</table>
<h3 id="Jobs"><a href="#Jobs" class="headerlink" title="Jobs"></a>Jobs</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">job_start()</td>
<td style="text-align:left">启动作业</td>
</tr>
<tr>
<td style="text-align:left">job_stop()</td>
<td style="text-align:left">停止作业</td>
</tr>
<tr>
<td style="text-align:left">job_status()</td>
<td style="text-align:left">获取作业的状态</td>
</tr>
<tr>
<td style="text-align:left">job_getchannel()</td>
<td style="text-align:left">获取作业使用的通道</td>
</tr>
<tr>
<td style="text-align:left">job_info()</td>
<td style="text-align:left">获取有关作业的信息</td>
</tr>
<tr>
<td style="text-align:left">job_setoptions()</td>
<td style="text-align:left">设置作业的选项</td>
</tr>
</tbody>
</table>
<h3 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">timer_start()</td>
<td style="text-align:left">创建一个定时器</td>
</tr>
<tr>
<td style="text-align:left">timer_pause()</td>
<td style="text-align:left">暂停或取消暂停计时器</td>
</tr>
<tr>
<td style="text-align:left">timer_stop()</td>
<td style="text-align:left">停止定时器</td>
</tr>
<tr>
<td style="text-align:left">timer_stopall()</td>
<td style="text-align:left">停止所有计时器</td>
</tr>
<tr>
<td style="text-align:left">timer_info()</td>
<td style="text-align:left">获取有关计时器的信息</td>
</tr>
</tbody>
</table>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><table>
<thead>
<tr>
<th style="text-align:left">函数</th>
<th style="text-align:left">用法 </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">mode()</td>
<td style="text-align:left">获取当前编辑模式</td>
</tr>
<tr>
<td style="text-align:left">visualmode()</td>
<td style="text-align:left">最后使用的可视模式</td>
</tr>
<tr>
<td style="text-align:left">exists()</td>
<td style="text-align:left">检查是否存在变量，函数等</td>
</tr>
<tr>
<td style="text-align:left">has()</td>
<td style="text-align:left">检查Vim中是否支持特性</td>
</tr>
<tr>
<td style="text-align:left">changenr()</td>
<td style="text-align:left">返回最近更改的数字</td>
</tr>
<tr>
<td style="text-align:left">cscope_connection()</td>
<td style="text-align:left">检查cscope连接是否存在</td>
</tr>
<tr>
<td style="text-align:left">did_filetype()</td>
<td style="text-align:left">检查是否使用了FileType自动命令</td>
</tr>
<tr>
<td style="text-align:left">eventhandler()</td>
<td style="text-align:left">检查是否由事件处理程序调用</td>
</tr>
<tr>
<td style="text-align:left">getpid()</td>
<td style="text-align:left">获取Vim的进程ID</td>
</tr>
<tr>
<td style="text-align:left">libcall()</td>
<td style="text-align:left">调用外部库中的函数</td>
</tr>
<tr>
<td style="text-align:left">lincoln()</td>
<td style="text-align:left">idem，返回一个数字</td>
</tr>
<tr>
<td style="text-align:left">undofile()</td>
<td style="text-align:left">获取撤销文件的名称</td>
</tr>
<tr>
<td style="text-align:left">undotree()</td>
<td style="text-align:left">返回撤销树的状态</td>
</tr>
<tr>
<td style="text-align:left">getreg()</td>
<td style="text-align:left">获取寄存器的内容</td>
</tr>
<tr>
<td style="text-align:left">getregtype()</td>
<td style="text-align:left">获取寄存器的类型</td>
</tr>
<tr>
<td style="text-align:left">setreg()</td>
<td style="text-align:left">设置寄存器的内容和类型</td>
</tr>
<tr>
<td style="text-align:left">shiftwidth()</td>
<td style="text-align:left">有效值’shiftwidth’</td>
</tr>
<tr>
<td style="text-align:left">wordcount()</td>
<td style="text-align:left">获取缓冲区的字节/字/ char计数</td>
</tr>
<tr>
<td style="text-align:left">taglist()</td>
<td style="text-align:left">获取匹配标签的列表</td>
</tr>
<tr>
<td style="text-align:left">tagfiles()</td>
<td style="text-align:left">获取标签文件的列表</td>
</tr>
<tr>
<td style="text-align:left">luaeval()</td>
<td style="text-align:left">评估Lua表达式</td>
</tr>
<tr>
<td style="text-align:left">mzeval()</td>
<td style="text-align:left">计算<code>MzScheme</code> 表达</td>
</tr>
<tr>
<td style="text-align:left">perleval()</td>
<td style="text-align:left">计算Perl表达式（<code>+perl</code>）</td>
</tr>
<tr>
<td style="text-align:left">py3eval()</td>
<td style="text-align:left">评估Python表达式（<code>+python3</code>）</td>
</tr>
<tr>
<td style="text-align:left">pyeval()</td>
<td style="text-align:left">求值Python表达式（<code>+python</code>）</td>
</tr>
</tbody>
</table>
<h1 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h1><h2 id="进入调试模式"><a href="#进入调试模式" class="headerlink" title="进入调试模式"></a>进入调试模式</h2><ul>
<li><code>vim -D file.txt</code> 使用 <code>-D</code>参数打开vim</li>
<li>调用带<code>:debug</code>前缀的命令。调试只有当这个命令执行时有效。用于调试特定脚本或者用户函数，以及自动命令使用的脚本和函数。</li>
<li>在源文件或者用户函数中设置断点。你可以在命令行里这样做：<code>vim -c &quot;breakadd file \*/explorer.vim&quot;</code>。</li>
<li>在调试模式，每条执行命令在它执行前显示。跳过空行和没有执行的行。当一行内包含两条命令，由<code>|</code>分开，每条命令分别显示。</li>
<li>在调试模式下可以使用平常的Ex命令。</li>
</ul>
<h2 id="调试模式下的命令"><a href="#调试模式下的命令" class="headerlink" title="调试模式下的命令"></a>调试模式下的命令</h2><ul>
<li><code>cont</code></li>
<li><code>quit</code></li>
<li><code>next</code></li>
<li><code>step</code></li>
<li><code>interrupt</code></li>
<li><code>finish</code></li>
<li><code>backtrace``bt``where</code></li>
<li><code>frame N</code></li>
<li><code>up</code></li>
<li><code>down</code></li>
<li>不会自动补全，自动补全只对Ex命令有效</li>
<li>可以缩短输入的字符，除了相同字符开始的命令需要输入足够字符区分。f=finish,fr=frame</li>
<li>点击<cr>重复上个命令，当运行另一个命令时，重置。</cr></li>
<li>当需要使用相同名字的Ex命令时，前面添加冒号。</li>
</ul>
<h2 id="断点"><a href="#断点" class="headerlink" title="断点"></a>断点</h2><h3 id="添加断点"><a href="#添加断点" class="headerlink" title="添加断点"></a>添加断点</h3><ul>
<li><code>:breaka[dd] func [lnum] {name}</code> 在函数里设置断点，不会验证函数名有效性，因此可以在函数定义前添加断点。</li>
<li><code>:breaka[dd] file [lnum] {name}</code> 在源文件设置断点</li>
<li><code>:breaka[dd] here</code> 在当前文件当前行设置断点。</li>
<li><code>[lnum]</code>是断点的行数字，缺省为1</li>
<li><code>{name}</code>匹配文件或者函数名的模式。不指定目录则使用当前目录。</li>
</ul>
<h3 id="删除断点"><a href="#删除断点" class="headerlink" title="删除断点"></a>删除断点</h3><ul>
<li><code>:breakd[el] {nr}</code>删除断点{nr}， 使用<code>:breaklist</code>查看每个断点的数值</li>
<li><code>:breakd[el] \*</code>删除所有断点</li>
<li><code>:breakd[el] func [lnum] {name}</code>删除函数内断点</li>
<li><code>:breakd[el] file [lnum] {name}</code>删除源文件断点</li>
<li><code>:breakd[el] here</code>删除当前文件当前行断点</li>
<li><code>[lnum]</code>缺省为第一个断点位置</li>
</ul>
<h3 id="列出断点"><a href="#列出断点" class="headerlink" title="列出断点"></a>列出断点</h3><ul>
<li><code>:breakl[ist]</code> 列出所有断点</li>
</ul>
<h1 id="异常-Exceptions"><a href="#异常-Exceptions" class="headerlink" title="异常(Exceptions)"></a>异常(Exceptions)</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">:try</div><div class="line">: read ~/templates/pascal.tmpl</div><div class="line">:catch /E484:/</div><div class="line"> echo &quot;sorry, ...&quot;</div><div class="line">:endtry</div></pre></td></tr></table></figure>
<ul>
<li>异常是一个字符串，每个错误信息都有一个固定数值</li>
<li>通过匹配模式处理对应异常</li>
<li>匹配模式为空表示捕捉所有异常</li>
<li><code>:finally</code>机制，不管是否有错误或者退出都会执行到</li>
</ul>
<h1 id="特殊约定"><a href="#特殊约定" class="headerlink" title="特殊约定"></a>特殊约定</h1><h2 id="行结束符"><a href="#行结束符" class="headerlink" title="行结束符"></a>行结束符</h2><table>
<thead>
<tr>
<th style="text-align:left">系统</th>
<th style="text-align:right">符号</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Unix</td>
<td style="text-align:right"><code>&lt;NL&gt;</code></td>
</tr>
<tr>
<td style="text-align:left">MS-DOS,windows,OS/2</td>
<td style="text-align:right"><code>&lt;CR&gt;&lt;LF&gt;</code></td>
</tr>
</tbody>
</table>
<h2 id="空白字符"><a href="#空白字符" class="headerlink" title="空白字符"></a>空白字符</h2><ul>
<li>允许并忽略空行</li>
<li>前导空白字符所有忽略</li>
<li>参数间的空白字符它缩减为一个并作为分隔字符使用</li>
<li>最后一个字符后的空白字符根据情况可能忽略也可能不忽略</li>
<li><code>=</code>前的空白忽略，但后面则不</li>
<li>选项中包含空白字符使用反斜杠转义</li>
</ul>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><ul>
<li>字符<code>&quot;</code>表示注释。<code>&quot;</code>后面包括该字符直到行尾都认为是注释并忽略，除非命令不认为是注释。</li>
<li>注释能在行的任何字符位置开始</li>
<li>以下命令需要通过<code>|</code>分隔成两个命令处理，否则注释会被认为是命令的一部分</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">:abbrev dev development|&quot; shorthand</div><div class="line">:map &lt;F3&gt; o#include|&quot; insert include</div><div class="line">:excute cmd         |&quot; do it</div><div class="line">:exe &apos;!ls *c&apos;       |&quot; list C files</div></pre></td></tr></table></figure>
<h1 id="添加插件"><a href="#添加插件" class="headerlink" title="添加插件"></a>添加插件</h1><h1 id="编写插件"><a href="#编写插件" class="headerlink" title="编写插件"></a>编写插件</h1><h2 id="插件类型"><a href="#插件类型" class="headerlink" title="插件类型"></a>插件类型</h2><ul>
<li>全局插件(global) 对所有类型文件有效</li>
<li>文件类型插件(filetype) 只对指定类型文件有效</li>
</ul>
<h2 id="插件名"><a href="#插件名" class="headerlink" title="插件名"></a>插件名</h2><ul>
<li>不能超过8个字符,避免在旧的windows系统上出问题</li>
</ul>
<h2 id="插件头部"><a href="#插件头部" class="headerlink" title="插件头部"></a>插件头部</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&quot; Vim global plugin for correcting typing mistakes</div><div class="line">&quot; Last Change:  2000 Oct 15</div><div class="line">&quot; Maintainer: Bram Moolenaar &lt;Bram@vim.org&gt;</div><div class="line">&quot; License:	This file is placed in the public domain.</div><div class="line">&quot; copyright</div></pre></td></tr></table></figure>
<h2 id="续行与避免边界效果"><a href="#续行与避免边界效果" class="headerlink" title="续行与避免边界效果"></a>续行与避免边界效果</h2><ul>
<li><code>compatible</code>选项设置后续行机制运行会出问题，不能只是重置<code>compatible</code>，因为那样有很多边界效果。避免这个，设置<code>cpoptions</code>选项为vim默认值并稍候恢复它。</li>
</ul>
<h2 id="不加载"><a href="#不加载" class="headerlink" title="不加载"></a>不加载</h2><blockquote>
<p>添加变量判断，避免多次加载并可通过变量控制是否加载该插件<br>推荐变量名使用前缀”loaded”，后接插件的文件名。<br>使用<code>finish</code>停止读取后续脚本</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if exists(&quot;g:loaded_typecorr&quot;)</div><div class="line">  finish</div><div class="line">endif</div><div class="line">let g:loaded_typecorr = 1</div></pre></td></tr></table></figure>
<h2 id="映射-1"><a href="#映射-1" class="headerlink" title="映射"></a>映射</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">map &lt;unique&gt; &lt;Leader&gt;a &lt;Plug&gt;TypecorrAdd</div></pre></td></tr></table></figure>
<ul>
<li>使用<code>&lt;unique&gt;</code>，如果映射已存在时报错</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if !hasmapto(&apos;&lt;Plug&gt;TypecorrAdd&apos;)</div><div class="line">  map &lt;unique&gt; &lt;Leader&gt;a &lt;Plug&gt;TypecorrAdd</div><div class="line">endif</div></pre></td></tr></table></figure>
<ul>
<li>判断是否有相关的映射</li>
</ul>
<h1 id="编写文件类型插件"><a href="#编写文件类型插件" class="headerlink" title="编写文件类型插件"></a>编写文件类型插件</h1><h1 id="编写编译器插件"><a href="#编写编译器插件" class="headerlink" title="编写编译器插件"></a>编写编译器插件</h1><h1 id="编写库脚本"><a href="#编写库脚本" class="headerlink" title="编写库脚本"></a>编写库脚本</h1><h1 id="编写快速加载插件"><a href="#编写快速加载插件" class="headerlink" title="编写快速加载插件"></a>编写快速加载插件</h1><h1 id="发布vim脚本"><a href="#发布vim脚本" class="headerlink" title="发布vim脚本"></a>发布vim脚本</h1>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/笔记/" rel="tag"># 笔记</a>
          
            <a href="/tags/vim/" rel="tag"># vim</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/11/13/hexo使用publish发布草稿/" rel="next" title="hexo使用publish发布草稿">
                <i class="fa fa-chevron-left"></i> hexo使用publish发布草稿
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/12/29/trans_help/" rel="prev" title="trans命令帮助">
                trans命令帮助 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2016/12/15/Vim脚本语法/"
     data-title="Vim脚本语法"
     data-content=""
     data-url="http://x8087.github.io/2016/12/15/Vim脚本语法/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/12/15/Vim脚本语法/"
           data-title="Vim脚本语法" data-url="http://x8087.github.io/2016/12/15/Vim脚本语法/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="x8087" />
          <p class="site-author-name" itemprop="name">x8087</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">21</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">43</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/x8087" target="_blank" title="github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/1817414410" target="_blank" title="weibo">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  weibo
                </a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#流程控制"><span class="nav-number">1.</span> <span class="nav-text">流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#条件-if"><span class="nav-number">1.1.</span> <span class="nav-text">条件(if)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#循环"><span class="nav-number">1.2.</span> <span class="nav-text">循环</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#while"><span class="nav-number">1.2.1.</span> <span class="nav-text">while</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for-in"><span class="nav-number">1.2.2.</span> <span class="nav-text">for in</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更多循环"><span class="nav-number">1.2.3.</span> <span class="nav-text">更多循环</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#变量"><span class="nav-number">2.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#变量类型"><span class="nav-number">2.1.</span> <span class="nav-text">变量类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数字"><span class="nav-number">2.1.1.</span> <span class="nav-text">数字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串"><span class="nav-number">2.1.2.</span> <span class="nav-text">字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#字符串常量"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">字符串常量</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用双引号"><span class="nav-number">2.1.2.1.1.</span> <span class="nav-text">使用双引号</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用单引号"><span class="nav-number">2.1.2.1.2.</span> <span class="nav-text">使用单引号</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#列表"><span class="nav-number">2.1.3.</span> <span class="nav-text">列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字典"><span class="nav-number">2.1.4.</span> <span class="nav-text">字典</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量范围"><span class="nav-number">2.2.</span> <span class="nav-text">变量范围</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#花括号名称"><span class="nav-number">2.3.</span> <span class="nav-text">花括号名称</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#表达式"><span class="nav-number">3.</span> <span class="nav-text">表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#表达式语法"><span class="nav-number">3.1.</span> <span class="nav-text">表达式语法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Execute命令"><span class="nav-number">4.</span> <span class="nav-text">Execute命令</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#函数"><span class="nav-number">5.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#调用函数"><span class="nav-number">5.1.</span> <span class="nav-text">调用函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除函数"><span class="nav-number">5.2.</span> <span class="nav-text">删除函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数引用"><span class="nav-number">5.3.</span> <span class="nav-text">函数引用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#定义函数"><span class="nav-number">5.4.</span> <span class="nav-text">定义函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用区域"><span class="nav-number">5.4.1.</span> <span class="nav-text">使用区域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可变数量参数"><span class="nav-number">5.4.2.</span> <span class="nav-text">可变数量参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#列出函数"><span class="nav-number">5.4.3.</span> <span class="nav-text">列出函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数列表"><span class="nav-number">5.5.</span> <span class="nav-text">函数列表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串操作："><span class="nav-number">5.5.1.</span> <span class="nav-text">字符串操作：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#列表操作："><span class="nav-number">5.5.2.</span> <span class="nav-text">列表操作：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字典操作："><span class="nav-number">5.5.3.</span> <span class="nav-text">字典操作：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#浮点计算"><span class="nav-number">5.5.4.</span> <span class="nav-text">浮点计算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其它计算"><span class="nav-number">5.5.5.</span> <span class="nav-text">其它计算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量-1"><span class="nav-number">5.5.6.</span> <span class="nav-text">变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#光标和标志位置"><span class="nav-number">5.5.7.</span> <span class="nav-text">光标和标志位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用当前缓冲区的文本"><span class="nav-number">5.5.8.</span> <span class="nav-text">使用当前缓冲区的文本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#系统功能和文件操作"><span class="nav-number">5.5.9.</span> <span class="nav-text">系统功能和文件操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#日期和时间"><span class="nav-number">5.5.10.</span> <span class="nav-text">日期和时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#缓冲区，窗口和参数列表"><span class="nav-number">5.5.11.</span> <span class="nav-text">缓冲区，窗口和参数列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#命令行"><span class="nav-number">5.5.12.</span> <span class="nav-text">命令行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#快速修复和位置列表"><span class="nav-number">5.5.13.</span> <span class="nav-text">快速修复和位置列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#插入模式补全"><span class="nav-number">5.5.14.</span> <span class="nav-text">插入模式补全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#折叠"><span class="nav-number">5.5.15.</span> <span class="nav-text">折叠</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#语法和高亮"><span class="nav-number">5.5.16.</span> <span class="nav-text">语法和高亮</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#拼写"><span class="nav-number">5.5.17.</span> <span class="nav-text">拼写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#历史"><span class="nav-number">5.5.18.</span> <span class="nav-text">历史</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#互动"><span class="nav-number">5.5.19.</span> <span class="nav-text">互动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GUI"><span class="nav-number">5.5.20.</span> <span class="nav-text">GUI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VIM服务器"><span class="nav-number">5.5.21.</span> <span class="nav-text">VIM服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#窗口大小和位置"><span class="nav-number">5.5.22.</span> <span class="nav-text">窗口大小和位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#映射"><span class="nav-number">5.5.23.</span> <span class="nav-text">映射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#测试"><span class="nav-number">5.5.24.</span> <span class="nav-text">测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#进程间通信"><span class="nav-number">5.5.25.</span> <span class="nav-text">进程间通信</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Jobs"><span class="nav-number">5.5.26.</span> <span class="nav-text">Jobs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#定时器"><span class="nav-number">5.5.27.</span> <span class="nav-text">定时器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他"><span class="nav-number">5.5.28.</span> <span class="nav-text">其他</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#调试"><span class="nav-number">6.</span> <span class="nav-text">调试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#进入调试模式"><span class="nav-number">6.1.</span> <span class="nav-text">进入调试模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#调试模式下的命令"><span class="nav-number">6.2.</span> <span class="nav-text">调试模式下的命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#断点"><span class="nav-number">6.3.</span> <span class="nav-text">断点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#添加断点"><span class="nav-number">6.3.1.</span> <span class="nav-text">添加断点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除断点"><span class="nav-number">6.3.2.</span> <span class="nav-text">删除断点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#列出断点"><span class="nav-number">6.3.3.</span> <span class="nav-text">列出断点</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#异常-Exceptions"><span class="nav-number">7.</span> <span class="nav-text">异常(Exceptions)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#特殊约定"><span class="nav-number">8.</span> <span class="nav-text">特殊约定</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#行结束符"><span class="nav-number">8.1.</span> <span class="nav-text">行结束符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#空白字符"><span class="nav-number">8.2.</span> <span class="nav-text">空白字符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注释"><span class="nav-number">8.3.</span> <span class="nav-text">注释</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#添加插件"><span class="nav-number">9.</span> <span class="nav-text">添加插件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编写插件"><span class="nav-number">10.</span> <span class="nav-text">编写插件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#插件类型"><span class="nav-number">10.1.</span> <span class="nav-text">插件类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#插件名"><span class="nav-number">10.2.</span> <span class="nav-text">插件名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#插件头部"><span class="nav-number">10.3.</span> <span class="nav-text">插件头部</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#续行与避免边界效果"><span class="nav-number">10.4.</span> <span class="nav-text">续行与避免边界效果</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#不加载"><span class="nav-number">10.5.</span> <span class="nav-text">不加载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#映射-1"><span class="nav-number">10.6.</span> <span class="nav-text">映射</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编写文件类型插件"><span class="nav-number">11.</span> <span class="nav-text">编写文件类型插件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编写编译器插件"><span class="nav-number">12.</span> <span class="nav-text">编写编译器插件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编写库脚本"><span class="nav-number">13.</span> <span class="nav-text">编写库脚本</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编写快速加载插件"><span class="nav-number">14.</span> <span class="nav-text">编写快速加载插件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#发布vim脚本"><span class="nav-number">15.</span> <span class="nav-text">发布vim脚本</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">x8087</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"x8087"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
      <script src="/js/src/hook-duoshuo.js?v=5.1.0"></script>
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("vplbqDrK7KP8HzD5uBan8fgD-gzGzoHsz", "TQ074jpoPCHUVWRFj6eMu7KS");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  


</body>
</html>
